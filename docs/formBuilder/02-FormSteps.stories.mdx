import { Meta } from '@storybook/addon-docs/blocks';

<Meta title="FormBuilder/FormSteps" />

# FormSteps

`FormSteps` allows you to define a form with multiple steps. Each step is defined by one or more [components](/?path=/story/formbuilder-03-components--page).

## Basic example

```js
[
  {
    id: 'first-step',
    title: 'First Step',
    components: [
      {
        component: 'Text',
        name: 'first_name',
        label: 'First Name',
      },
      {
        component: 'Text',
        name: 'last_name',
        label: 'Last Name',
      },
    ],
  },
];
```

Each step has the following properties:

- `id` the step id, that is going to be user in the URL (i.e. `/form/test/:stepId`)
- `title` that is going to be shown on top of the form
- `components` an array of objects, each object corresponds to an input field

## Advanced examples

> See [an example](https://github.com/LBHackney-IT/lbh-social-care/blob/main/data/forms/test.jsx) on Github

### Conditional render

```js
[
  {
    id: 'first-step',
    title: 'First Step',
    {
        component: 'CheckBox',
        name: 'show_next_step',
        label: 'Title',
      },
  }
  {
    id: 'condition-step',
    title: 'Conditional Step',
    conditionalRender: ({ show_next_step }) => show_next_step === true,
    components: [
      {
        component: 'CheckBox',
        label="Show title"
        name="show_title"
      },
      {
        conditionalRender: ({ show_title }) => show_title === true,
        component: 'TextInput',
        name: 'title',
        label: 'Title',
      },
    ],
  },
];
```

`conditionalRender` is supported by the steps and the components. It's a function that gets as first argument the `formData` and if it returns true shows the step/input. Otherwise it hides the step/input.

### Multiple steps

```js
[
  {
    isMultiple: true,
    id: 'multi-step',
    title: 'Multi Step',
    {
        component: 'TextInput',
        name: 'title',
        label: 'Title',
      },
  }
]
```

`isMulti` allows you to create multiple instances of the same step and it's handy if you have to give the user the possibility to enter the same form multiple times (i.e. if you are adding a list).

The form data generated by a multi-step is an array of values, each position corresponds to the data entered for that position.
